<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>06 DOM</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <style media="screen">

      .invisible {
          display: none;

      }

    </style>
</head>
<body>
<div class="container">
    <div clas="row">
        <h1>Inscription</h1>
        <form action="/" method="post" class="col-6" novalidate>
            <div class="form-group">
                <label for="form__register_lastname">Nom*</label>
                <input type="text" class="form-control is-valid" id="form__register_lastname" value="tareq##" required>
                <div class="form-errors"></div>
            </div>
            <div class="form-group">
                <label for="form__register_firstname">Prénom</label>
                <input type="email" class="form-control" id="form__register_firstname">
                <div class="form-errors"></div>
            </div>
            <div class="form-group">
                <label>Sexe</label>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="form__register_gender" id="form__register_gender01" value="M" >
                    <label class="form-check-label" for="form__register_gender01">
                        Homme
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="form__register_gender" id="form__register_gender02" value="F">
                    <label class="form-check-label" for="form__register_gender02">
                        Femme
                    </label>
                </div>
                <div class="form-check disabled">
                    <input class="form-check-input" type="radio" name="form__register_gender" id="form__register_gender03" value="A" checked>
                    <label class="form-check-label" for="form__register_gender03">
                        Non renseigné
                    </label>
                </div>
            </div>
            <div class="form-group">
                <label for="form__register_email">Email*</label>
                <input type="email" class="form-control is-invalid" id="form__register_email" value="ploporange.com" required>
                <div class="form-errors">
                    <small class="text-danger">
                        Cet email n'est pas valide
                    </small>
                </div>
            </div>
            <div class="form-group">
                <label for="form__register_password">Mot de passe*</label>
                <input type="password" class="form-control" id="form__register_password" required>
                <div class="form-errors"></div>
            </div>
            <div class="form-group">
                <label for="form__register_password-repeat">Validation mot de passe*</label>
                <input type="password" class="form-control" id="form__register_password-repeat" required>
                <div class="form-errors"></div>
            </div>
            <div class="form-group row">
                <label class="col-6" for="form__register_conditions">
                    Accepter les conditions*
                </label>
                <input type="checkbox" class="col-6 form-control" id="form__register_conditions" required>
                <div class="form-errors col-12">
                    <small class="text-danger">
                        Vous devez accepter les conditions générales
                    </small>
                </div>
            </div>
            <hr>
            <button type="button" class="btn btn-success">Valider</button>
        </form>
    </div>
</div>

<script type="text/javascript">

    let inputLastname = document.querySelector('#form__register_lastname');

    console.log('Input lastname' , inputLastname);

    let inputLastnameValue = inputLastname.value;
    let inputLastnameHasError = false;
    console.log('Valeur : ', inputLastnameValue);


      let reg = new RegExp('^[a-zA-Z0-9- ]+$');


       console.log('inputLastnameValue', inputLastnameValue)
      console.log('reg.test(name)', reg.test(inputLastnameValue))
       if(!reg.test(inputLastnameValue)) {
         inputLastnameHasError = true;
         console.log('il y a une erreur');
       }
       else {
         console.log('pas d erreur sur le pattern');
       }

       if(inputLastnameValue.length < 3 || inputLastnameValue.length > 30) {
         inputLastnameHasError = true;
       }

       if(inputLastnameHasError) {
         inputLastname.className = 'form-control is-invalid';
       }
       else {
         inputLastname.className = 'form-control is-valid';
       }


      let inputErrors = document.querySelectorAll('.form-errors');

           console.log('input errors' , inputErrors);


      for (let i = 0; i < inputErrors.length; i++) {

        console.log(inputErrors[i]);

        inputErrors[i].className = 'invisible';

      }

      let inputs = document.querySelectorAll('input');



      for(let j=0; j < inputs.length;j++) {
         inputs[j].classList.remove("is-invalid");
      }

          console.log(inputs);


</script>
</body>
</html>
